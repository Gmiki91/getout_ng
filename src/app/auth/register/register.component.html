<mat-card>
  <mat-card-content>
    <form class="form" #regForm="ngForm" (ngSubmit)="onSubmit(regForm)">
      @if(!isRegistrationSent){
      <mat-form-field appearance="outline">
        <mat-label for="username">username</mat-label>
        <input
          matInput
          required
          name="username"
          ngModel
          #username="ngModel"
          type="text"
        />
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label for="email">e-mail</mat-label>
        <input
          matInput
          required
          name="email"
          ngModel
          #email="ngModel"
          type="email"
        />
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label for="password">password</mat-label>
        <input
          matInput
          required
          name="password"
          [(ngModel)]="password"
          type="password"
          minlength="4"
        />
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label for="password2">password again</mat-label>
        <input
          matInput
          required
          name="password2"
          [(ngModel)]="password2"
          type="password"
          minlength="4"
        />
      </mat-form-field>
      @if(password2!==password && regForm.controls['password2'].touched &&
      regForm.controls['password2'].dirty) {
      <mat-error>passwords do not match</mat-error>
      }
      <mat-form-field appearance="outline">
        <mat-label for="elo">approximate ELO</mat-label>
        <input
          matInput
          name="elo"
          ngModel
          #elo="ngModel"
          type="number"
          min="1"
          max="3000"
          placeholder="leave empty if unsure"
        />
      </mat-form-field>
      <mat-card-actions class="actions">
        <button
          mat-flat-button
          type="submit"
          class="bold"
          [disabled]="regForm.invalid || password2 !== password"
        >
          create user
        </button>
      </mat-card-actions>
      }@else{
      <span class="resend-text">Registration successful! Please check your email to confirm your account.</span>
      <button
        type="button"
        class="resend-btn"
        (click)="onResendConfirmation()"
        mat-flat-button>
        Resend email
      </button>
      }
    </form>
  </mat-card-content>
</mat-card>
